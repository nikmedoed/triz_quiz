# Концепт

Хочу сделать доклад в клубе ТРИЗ с викториной.

Это должна быть презентация.
Я собрал некоторый набор бытовых кейсов, которые я разрешал приёмами.

Сценарий для каждого кейса

- Описание изобретательской ситуации, вводные данные.
- Общий вопрос с открытым вариантом ответов.
- Ввод ответов участниками. Не обязательно, но поощряется. Ответы в свободной форме.
- Обзор ответов, голосование. Все участники голосуют за то, что нравится. За себя голосовать нельзя.
- Просмотр результатов голосования, обсуждение.
- Вопрос с вариантами ответа, один верный.
- Слайды пояснения решения, использованные методы.

За каждый верный ответ в викторине - 1-2 балла. В зависимости от сложности буду настраивать.
За каждый полученный голос - 1 балл.
По участникам надо считать баллы.

При входе в викторину участник регистрируется.
Слайд демонстрирует ведущий, переключает ведущий, модерирует, вдит как продивгается голосование на отдельном экране.

Как можно сделать такую викторино презентацию?
Бесплатно.

Я бы хотел слайды делать типично в powerpoint.

Я изучил кучу решений, что есть на рынке, и оказывается, что это всё сложно и ебано. Мне не нравится. Придётся делать
своё, но что-то быстрое.

Для приёма ответов я предлагаю использовать телеграм бота, потому что у всех участников есть телеграм, он им понятен и
предсказуем. В боте можно заранее авторизоваться, легко идентифицировать участников, не надо никакие QR пересылать,
просто через чаты отправим ссылку.
Бота мне комфортнее писать на aiogram.
Я заранее занесу сценарий в бота, он будет статичен. Активирую его перед мероприятием. Нужен будет какой-то интерфейс,
чтобы гнать бота далее по сценарию. Скорее всего с фронтовой частью связать.

Для визуализации рейтингов 2 варианта:

- flask приложение, с вебсокетами, которое визуализирует на отдельном от презентации экране происходящее в режиме
  реального времени. Я буду вручную переключать на него трансляцию. Поэтому там только отображение результатов по
  текущему шагу: варианты ответов, результаты голосования за варианты, вопрос квиза, результаты квиза, а в конце общие
  результаты.
- Сделать надстройку для презентации, чтобы там отображать всё сразу на слайде. Круто, но скорее всего всё равно надо
  сделать вебвью. Я не нашёл рабочих плагинов. Они все устарели. При этом есть плагины от похожих сервисов, и они скорее
  всего просто веб интерфейс демонстрируют, т.е. простое VBA, с открытием ссылок. Ну это нам подходит так то.

# Сценарий работы

В работе системы 3 этапа.
Буду описывать по шагам. А ты исправляй логику.

## Этап 1

Регистрация пользователей.

- Я запускаю приложение
- открывается страница регистрации пользователей
- Участники активируют бота
- он запрашивает имя
- Вводят имя, попадают на общую страницу

Используем именно то что участники вводят. Это сохраняем в базе, чтобы переиспользовать.
Также сохраняем их аватарки, чтобы выводить на странице.
На странице выводятся участники сеткой, но чтобы вмещались на один экран, уменьшаются.
Участники отображаются по мере регистрации.

Есть кнопка начать, которая переведёт всю систему на второй этап.

## Этап 2.

Цикл вопросов разного рода.

- Переключение состояний происходит по активации модератором на стороне фронт страницы
- Состояние переключается разом у всех участников
- Может быть несколько подряд сценариев выбора ответа или гипотезы решений, любой порядок
- Для каждого ответа фиксировать время ответа. Это нужно для общей статистики при равном количестве баллов. Будем
  учитывать скорость ответов.

### Модератор включает вопрос

- Всем приходит текст вопроса, может несколько сообщений, картинки. Если участник только что зарегистрировался, то ему
  тоже приходит текущий вопрос.
- Участники как-то отвечают на вопрос, вводят ответ, изменяют его, выбирают варианты, голосуют за данные ответы.
- Пока участники отвечают на экране ничего не меняется, конкретные сценарии описаны ниже. К примеру, задаётся вопрос с
  открытым ответом, на экране описание вопроса, участники могут отвечать, приложение собирает ответы не отображает.
- После каждого "вопроса" подразумевается шаг "демонстрации". Модератор сам переключает из веб интерфейса на
  демонстрацию. После этого всем участникам отправляется, что ответы более не принимаются, перейдите в общий зал, где
  уже демонстрируются результаты. Открывается страница с результатами, где в зависимости от сценария могут быть
  результаты голосования, список идей, правильный ответ и статистика.
- Затем модератор переключается далее и там будет новый вопрос, который будет задан всем.

### Сценарий "Гипотезы решений"

- Модератор переключается на шаг с идеями
- На экране презентации высвечивается описание проблемы и участники получают адаптированное описание в сообщении
- Участник предлагает идею, или не предлагает
- После отправки сообщения бот сообщает, что идея принята и "вы можете изменить ответ, отправив новое сообщение.
  Редактирование сообщений не поддерживается, скопируйте, измените и пришлите новое".
- Цикл приёма продолжается, пока модератор не нажмёт кнопку далее.
- Принимается только один ответ, хранится для следующего шага
- Модератор переключается далее. Ответы более не принимаются, бот сообщает об этом. на экране высвечивается список идей
  в анонимном виде пронумерованные, в боте активируется режим голосования. ОН присылает сообщение: начато голосование за
  идеи, выберите номера, которые считаете достойным и методологически обоснованным решением описанной проблемы. Ниже
  кнопки с номерами и обрезанным по количеству символов идеей, чтобы было проще сличить, по одной на строке. Голосовать
  можно за несколько идей. Авто не получает в списке кнопок номера своей идеи, т.к. за себя голосовать нельзя.
- При демонстрации идей для голосования отображать через сколько времени с начала вопроса был дан ответ. Сортировать их
  в порядке появления.
- Пока участники голосуют на экране отображается список идей и прогресс по количеству участников, которые дали хотя бы
  один ответ. Также должен быть индикатор "последний голос х секунд назад".
- Участники могут нажимать на кнопки и отменять свои голоса, могут нажимать сколько угодно кнопок, хоть за все идеи
  голосовать.
- Модератор переключает на следующий шаг. Прогресс скрывается. У идей появляется количество голосов, имя автора,
  аватарка автора и маленькие аватарки проголосовавших за них.
- Модератор может переключиться на следующий шаг. Участники получают в свой рейтинг столько баллов, сколько за них
  проголосовало. Если ответа не было - ничего не получают.

### Сценарий "Выбор ответа"

- Модератор переключается на этап, отображается вопрос и варианты ответа, участники получают вопрос и кнопки под
  варианты ответа.
- Сообщение вопроса в чате содержит внутри себя пронумерованные варианты ответа на случай длинного текста, а также
  кнопки с номерами и текстом сколько влезет
- Участник может выбрать один вариант, пока модератор не переключится на следующий этап. Нажатие на кнопку переключает
  выбранный ответ
- Модератор переключается далее. Бот сообщает, что ответы более не принимаются, вернитесь в общий зал. На экране
  столбчатая диаграмма какой вариант сколько голосов набрал. Под вариантами аватарки проголосовавших и число. Правильный
  вариант выделен особо.
- Участники получают по указанному числу баллов за верный ответ, остальные ничего не получают
- Модератор может двигаться далее.

## Этап 3

В какой-то момент вопрос будет последний. С него переключаемся на финиш - общую статистику.
Должно отобразиться таблица участников: аватарка, фио, число баллов, место. Отсортированная по количеству баллов. При
одинаковом числе баллов выше тот, кто быстрее отвечал.

# Глобальные правила работы с базой

- На первом этапе должна быть кнопка сбросить базу. Удалит все данные из базы, приведёт в начальный вид, начнём с
  начала, регаться можно снова.
- Подключиться к викторине можно в любой момент. Сразу после подключения я начинаю участвовать на общих условиях, мне
  приходит текущее задание. Вопрос - вопрос, голосование - оно. Если это уже просмотр результатов, то сообщение "
  Дождитесь команды модератора".
- Изменить свои данные можно в любой момент командой старт. Он запускает сценарий пришли имя - имя есть, продолжай. Т.е.
  для пользователя временно запускается сценарий по указанию имени, оно обновится. Если имя уже в базе есть, должна быть
  кнопка отменить. По завершению или отмене пользователь возвращается к общему заданию / сосотоянию.
- 